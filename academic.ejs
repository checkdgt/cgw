
```{=html}
<style>
  .timeline {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 0;
  }
  
  .timeline::after {
    content: '';
    position: absolute;
    width: 6px;
    background-color: #007bff;
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -3px;
  }
  
  .timeline-item {
    padding: 10px 40px;
    position: relative;
    background-color: inherit;
    width: 50%;
  }
  
  .timeline-item::after {
    content: '';
    position: absolute;
    width: 25px;
    height: 25px;
    right: -17px;
    background-color: rgb(76, 184, 203);
    border: 4px solid #007bff;
    top: 15px;
    border-radius: 50%;
    z-index: 1;
  }
  
  .timeline-item.left {
    left: 0;
  }
  
  .timeline-item.right {
    left: 50%;
  }
  
  .timeline-item.right::after {
    left: -16px;
  }
  
  .timeline-content {
    padding: 20px 30px;
    background-color: rgb(142, 150, 201);
    position: relative;
    border-radius: 6px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-left: 4px solid #007bff;
  }
  
  .timeline-item.conference .timeline-content {
    border-left-color: #28a745;
  }
  
  .timeline-item.reviewer .timeline-content {
    border-left-color: #6f42c1;
  }
  
  .timeline-year {
    background-color: #007bff;
    color: white;
    padding: 5px 15px;
    border-radius: 20px;
    display: inline-block;
    margin-bottom: 10px;
    font-weight: bold;
  }
  
  .timeline-item.conference .timeline-year {
    background-color: #28a745;
  }
  
  .timeline-item.reviewer .timeline-year {
    background-color: #6f42c1;
  }
  
  @media screen and (max-width: 768px) {
    .timeline::after {
      left: 31px;
    }
    
    .timeline-item {
      width: 100%;
      padding-left: 70px;
      padding-right: 25px;
    }
    
    .timeline-item::before {
      left: 60px;
      border: medium solid white;
      border-width: 10px 10px 10px 0;
      border-color: transparent white transparent transparent;
    }
    
    .timeline-item.left::after,
    .timeline-item.right::after {
      left: 15px;
    }
    
    .timeline-item.right {
      left: 0%;
    }
  }
</style>
<% 
// Debug: Log the items to see what we're getting
// console.log('Items received:', JSON.stringify(items, null, 2));

// Sort all items by year in descending order
let allItems = Array.isArray(items) ? items : [];
allItems.sort((a, b) => b.year - a.year);

// Debug: Log the processed items
// console.log('Processed items:', allItems.length, allItems);
%>

<div class="timeline">
  <% let isLeft = true; %>
  <% for (const item of allItems) { %>
    <div class="timeline-item <%= item.type %> <%= isLeft ? 'left' : 'right' %>">
      <div class="timeline-content">
        <div class="timeline-year"><%= item.year %></div>
        
        <% if (item.type === 'conference') { %>
          <h3 class="text-success mb-2"><%= item.conference %></h3>
          <div class="mb-2">
            <strong>Position:</strong> <%= item.position %>
          </div>
          <% if (item.location) { %>
            <div class="mb-2">
              <strong>Location:</strong> <%= item.location %>
            </div>
          <% } %>
          <% if (item.description) { %>
            <div class="text-muted">
              <%= item.description %>
            </div>
          <% } %>
        <% } else if (item.type === 'reviewer') { %>
          <h3 class="text-purple mb-2" style="color: #6f42c1;"><%= item.journal %></h3>
          <div class="mb-2">
            <strong>Role:</strong> Reviewer
          </div>
          <% if (item.papers_reviewed) { %>
            <div class="mb-2">
              <strong>Papers Reviewed:</strong> <%= item.papers_reviewed %>
            </div>
          <% } %>
          <% if (item.description) { %>
            <div class="text-muted">
              <%= item.description %>
            </div>
          <% } %>
        <% } %>
        
        <% if (item.href) { %>
          <div class="mt-3">
            <a href="<%= item.href %>" target="_blank" class="btn btn-sm btn-outline-primary">
              View Details
            </a>
          </div>
        <% } %>
      </div>
    </div>
    <% isLeft = !isLeft; %>
  <% } %>
</div>

```